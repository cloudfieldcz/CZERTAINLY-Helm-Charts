{{- if not .Values.global.config.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: messaging-secret-{{ .Chart.Name | lower }}
data:
  messaging.provisioner.username: {{ pluck "provisionerUsername" .Values.global.messaging .Values.messaging | compact | first | b64enc | quote }}
  messaging.provisioner.password: {{ pluck "provisionerPassword" .Values.global.messaging .Values.messaging | compact | first | b64enc | quote }}
  messaging.proxy.username: {{ pluck "proxyUsername" .Values.global.messaging .Values.messaging | compact | first | b64enc | quote }}
  messaging.proxy.password: {{ pluck "proxyPassword" .Values.global.messaging .Values.messaging | compact | first | b64enc | quote }}
{{- end }}
